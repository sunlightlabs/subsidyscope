{% load humanize %}
{% load te_tags %}



<h4>Summary of {{ source }} Tax Expenditure Estimates by Report Year ($ millions)</h4><br/>
Click the plus for source information and footnotes from original report.
<div style="margin-bottom: {% ifequal source 'JCT' %}15{% else %}35{% endifequal %}px;"> 
	<table class="pted">
	
		<thead>
		<tr>
			<th scope="rowgroup"></th>
			<th colspan="{{ estimate_years|length }}">Estimate Year</th>
		</tr>
		
		<tr> 
		  <th  style="border-top: none;"></th>
		  {% for year in estimate_years %}<th>{% if forloop.first  %}{% te_previous_year previous_year %}{% endif %}{{year}}{% if forloop.last  %}{% te_next_year next_year %}{% endif %}</th>{% endfor %}
		 
		</tr>
		</thead>
		<tbody>
		<tr><th style="width: 67px;" colspan="15">Report Year</th></tr>
		
			{% for line in lines %}
				
				<tr>
				
					<th scope="row" style="border-top: 1px solid  #ccc;"><a id="{{ line.id }}_toggle" class="plus" href="#" onclick="toggleLine('{{ line.id }}');return false;" ></a><span><em>{{ line.report_year }}&nbsp;</em></span></th>
						
						{% for item in line.data %}
						
							{% ifnotequal item None %}
								<td style="background-color: {{ item.color }}; text-align: right; border-top: 1px solid  #ccc;">{{ item.value|floatformat:0|intcomma }}{% if item.notes %}*{% endif %}</td>
							{% else %}
							 	<td style="border-top: 1px solid  #ccc;"></td>
							{% endifnotequal %}
							
						{% endfor %}
					
					</tr>
					
					<tr id="{{ line.id }}_source" style="display: none;">
						<td style="text-align: right;  border-top: 1px solid  #eee; "><strong>Source:</strong></td><td colspan="14" style="text-align: left;  border-top: 1px solid  #eee;">{{ line.source }}</td>
					</tr>
					
					{% if line.footnotes %}
						<tr id="{{ line.id }}_footnotes" style="display: none;">
								<td style="text-align: right;"><strong>Footnotes:</strong></td><td colspan="14" style="text-align: left;">{{ line.footnotes|safe }}</td>
						</tr>
					{% endif %}
					
			{% endfor %}
		
		</tbody>
		</table>
		
</div>
